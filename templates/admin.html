{{define "admin.html"}}
<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
	<meta charset="UTF-8">
	<title>Admin - Quickr</title>
	<script src="https://cdn.tailwindcss.com"></script>
	<script>
		tailwind.config = { darkMode: 'class' }
	</script>
	<script src="https://unpkg.com/htmx.org@1.9.10"></script>
	<script src="/static/js/theme.js"></script>
</head>
<body class="h-full bg-gray-50 dark:bg-dark-bg dark:text-dark-text" hx-boost="true">
	<div class="min-h-full">
		<nav class="bg-white shadow dark:bg-dark-surface dark:border-b dark:border-dark-border">
			<div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
				<div class="flex h-16 justify-between items-center">
					<div class="flex">
						<div class="flex flex-shrink-0 items-center">
							<a href="/" class="text-2xl font-bold text-indigo-600 dark:text-dark-primary">Quickr</a>
						</div>
						<div class="ml-6 flex items-center space-x-8">
							<a href="/" class="inline-flex items-center border-b-2 px-1 pt-1 text-sm font-medium {{ if eq .active "home" }}border-indigo-500 text-gray-900 dark:text-white dark:border-dark-primary{{ else }}border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200{{ end }}">Home</a>
							<a href="/hot" class="inline-flex items-center border-b-2 px-1 pt-1 text-sm font-medium {{ if eq .active "hot" }}border-indigo-500 text-gray-900 dark:text-white dark:border-dark-primary{{ else }}border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200{{ end }}">Hot</a>
							<a href="/stats" class="inline-flex items-center border-b-2 px-1 pt-1 text-sm font-medium {{ if eq .active "stats" }}border-indigo-500 text-gray-900 dark:text-white dark:border-dark-primary{{ else }}border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200{{ end }}">Stats</a>
							{{ if .isAdmin }}
							<a href="/admin" class="inline-flex items-center border-b-2 px-1 pt-1 text-sm font-medium {{ if eq .active "admin" }}border-indigo-500 text-gray-900 dark:text-white dark:border-dark-primary{{ else }}border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200{{ end }}">Admin</a>
							{{ end }}
							<form method="POST" action="/logout" style="display:inline">
								<button class="text-blue-600" type="submit">Logout</button>
							</form>
							<span class="text-xs text-gray-500">{{ .userEmail }}</span>
						</div>
					</div>
					<button type="button" onclick="toggleTheme()" class="rounded-lg p-2.5 text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-4 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-700">
						<svg class="w-5 h-5 hidden dark:block" fill="currentColor" viewBox="0 0 20 20"><path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z"/></svg>
						<svg class="w-5 h-5 dark:hidden" fill="currentColor" viewBox="0 0 20 20"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"/></svg>
					</button>
				</div>
			</div>
		</nav>

		<main>
			<div id="app-content" class="mx-auto max-w-7xl py-6 sm:px-6 lg:px-8">
				<h1 class="text-2xl font-semibold text-gray-900 dark:text-white mb-4">Admin</h1>
				<div id="invite-error" class="text-sm text-red-600 dark:text-red-400 mb-3"></div>
				<form method="POST" action="/admin/invitations"
					hx-post="/admin/invitations"
					hx-target="#invites-body"
					hx-swap="afterbegin"
					class="flex flex-col sm:flex-row gap-3 items-start">
					<input type="email" name="email" placeholder="Invite email" required class="w-full sm:w-80 border rounded px-3 py-2" />
					<button type="submit" class="bg-indigo-600 text-white rounded px-4 py-2">Create Invite</button>
				</form>
				<h2 class="text-lg font-medium text-gray-900 dark:text-white mt-6">Invitations</h2>
				<div class="mt-2 overflow-hidden bg-white shadow ring-1 ring-black ring-opacity-5 sm:rounded-lg dark:bg-dark-surface dark:ring-dark-border">
					<table class="min-w-full">
						<thead class="bg-gray-50 dark:bg-dark-surface">
							<tr>
								<th class="py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 dark:text-white sm:pl-6">Email</th>
								<th class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900 dark:text-white">Status</th>
								<th class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900 dark:text-white">Expires</th>
								<th class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900 dark:text-white">Actions</th>
							</tr>
						</thead>
						<tbody id="invites-body" class="divide-y divide-gray-200 dark:divide-dark-border">
							{{range .invites}}
								{{template "admin_invite_row.html" .}}
							{{end}}
						</tbody>
					</table>
				</div>
			</div>
		</main>
	</div>
</body>
</html>
{{end}}